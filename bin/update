#!/bin/sh

if ! ping -q -w 1 -c 1 `ip r | grep default | cut -d ' ' -f 3` &> /dev/null
then
    echo "Not connected to the internet"
    exit 1
fi

tmux new-window -c ~ -n update
tmux send-keys yay Enter
for command in "nvim +PlugUpdate +PlugUpgrade +q +q" "rustup update" "flatpak update -y" "gem update" "tldr --update" "sh $ZSH/tools/upgrade.sh" "docker images | tail -n +2 | cut -d ' ' -f 1 | xargs -n 1 docker pull"
do
    tmux split-window -d "$command; tmux select-layout even-vertical"
    tmux select-layout even-vertical
done
