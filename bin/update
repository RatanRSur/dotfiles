#!/bin/bash
if ! ping -q -w 1 -c 1 www.google.com &> /dev/null
then
    echo "Not connected to the internet"
    exit 1
fi

update_layout="tmux select-layout -t update tiled"
tmux select-window -t update 2>/dev/null || tmux new-window -c ~ -n update
tmux send-keys yay Enter
for command in "nvim +PlugUpdate +PlugUpgrade +q +q" "rustup update" "flatpak update -y" "gem update" "tldr --update" "sh $ZSH/tools/upgrade.sh" "~/.tmux/plugins/tpm/bin/update_plugins all"
do
    tmux split-window -d "$command; $update_layout"
    $update_layout
done
# do docker updates all in separate windows
for image in `docker images | tail -n +2 | cut -d ' ' -f 1 | sort | uniq | rg -v "<none>"`; do
    tmux split-window -d "docker pull $image; $update_layout"
    $update_layout
done
